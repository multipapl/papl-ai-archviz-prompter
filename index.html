<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Archviz Prompter v3.1</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="main-layout">
    
    <div class="container">
        <header>
            <h1>AI ARCHVIZ PROMPTER <span style="font-size:0.6em; color:#4a9eff">v3.1 List Mode</span></h1>
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab('viewport')">1. Viewport</button>
                <button class="tab-btn" onclick="openTab('season')">2. Season</button>
                <button class="tab-btn" onclick="openTab('interior')">3. Interior</button>
            </div>
        </header>

        <div class="section-box">
            <label class="section-title">üìè Dimensions & Ratio</label>
            <div style="display:flex; gap:10px;">
                <input type="number" id="ar_w" placeholder="Width (px)" oninput="calcRatio()">
                <input type="number" id="ar_h" placeholder="Height (px)" oninput="calcRatio()">
            </div>
            <div id="ar_result" style="font-size: 0.8rem; color:#888; margin-top:5px; font-style: italic;">Ratio: Auto</div>
        </div>

        
        <hr style="border-color:#333; margin: 15px 0;">

        <div id="viewport" class="tab-content active">
            <div class="panel">
                <p class="desc">Strict geometry mode for Exteriors.</p>
                
                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_vp_biome" checked> <label for="use_vp_biome">Context / Location</label>
                    </div>
                    <select id="vp_biome" onchange="toggleCustom('vp_biome', 'custom_vp_biome')"></select>
                    <input type="text" id="custom_vp_biome" class="custom-input" placeholder="Type your custom location...">
                </div>

                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_vp_season" checked> <label for="use_vp_season">Season</label>
                    </div>
                    <select id="vp_season" onchange="toggleCustom('vp_season', 'custom_vp_season')"></select>
                    <input type="text" id="custom_vp_season" class="custom-input" placeholder="Custom season...">
                </div>

                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_vp_light" checked> <label for="use_vp_light">Lighting</label>
                    </div>
                    <select id="vp_light" onchange="toggleCustom('vp_light', 'custom_vp_light')"></select>
                    <input type="text" id="custom_vp_light" class="custom-input" placeholder="Custom lighting...">
                </div>

                 <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_vp_lens" checked> <label for="use_vp_lens">Camera Specs</label>
                    </div>
                    <input type="number" id="vp_lens" value="24" placeholder="Focal Length (mm)">
                    <div style="margin-top:10px; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="vp_dof"> 
                        <label for="vp_dof" style="margin:0; font-weight:normal; color:#aaa;">Enable Blur/DOF (Default: Sharp)</label>
                    </div>
                </div>
            </div>
        </div>

        <div id="season" class="tab-content">
            <div class="panel">
                <p class="desc">Creative reskin mode.</p>
                
                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_sc_season" checked> <label for="use_sc_season">Target Season</label>
                    </div>
                    <select id="sc_season" onchange="toggleCustom('sc_season', 'custom_sc_season')"></select>
                    <input type="text" id="custom_sc_season" class="custom-input" placeholder="Custom season description...">
                </div>

                 <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_sc_light" checked> <label for="use_sc_light">Target Lighting</label>
                    </div>
                    <select id="sc_light" onchange="toggleCustom('sc_light', 'custom_sc_light')"></select> 
                    <input type="text" id="custom_sc_light" class="custom-input" placeholder="Custom lighting...">
                </div>

                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_sc_lens" checked> <label for="use_sc_lens">Camera</label>
                    </div>
                    <input type="number" id="sc_lens" value="35">
                     <div style="margin-top:10px; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="sc_dof"> 
                        <label for="sc_dof" style="margin:0; font-weight:normal; color:#aaa;">Enable Blur/DOF</label>
                    </div>
                </div>
            </div>
        </div>

       <div id="interior" class="tab-content">
            <div class="panel">
                <p class="desc">Strict geometry mode for Interiors.</p>

                <div class="control-group">
                    <label>Room Type:</label>
                    <input type="text" id="in_room" placeholder="e.g. Living Room, Open Kitchen">
                </div>

                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_in_biome" checked> <label for="use_in_biome">Context / Location (View)</label>
                    </div>
                    <select id="in_biome" onchange="toggleCustom('in_biome', 'custom_in_biome')"></select>
                    <input type="text" id="custom_in_biome" class="custom-input" placeholder="Custom coords or location...">
                </div>

                <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_in_season" checked> <label for="use_in_season">Season (Outside View)</label>
                    </div>
                    <select id="in_season" onchange="toggleCustom('in_season', 'custom_in_season')"></select>
                    <input type="text" id="custom_in_season" class="custom-input" placeholder="Custom season...">
                </div>

                <div class="control-group">
                     <div class="control-header">
                        <input type="checkbox" id="use_in_light" checked> <label for="use_in_light">Lighting Scenario</label>
                    </div>
                    <select id="in_light" onchange="toggleCustom('in_light', 'custom_in_light')"></select>
                    <input type="text" id="custom_in_light" class="custom-input" placeholder="Custom interior lighting...">
                </div>

                 <div class="control-group">
                    <div class="control-header">
                        <input type="checkbox" id="use_in_lens" checked> <label for="use_in_lens">Lens</label>
                    </div>
                    <input type="number" id="in_lens" value="18">
                     <div style="margin-top:10px; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="in_dof"> 
                        <label for="in_dof" style="margin:0; font-weight:normal; color:#aaa;">Enable Blur/DOF</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="control-group" style="border-color: #4a9eff; margin-top:15px;">
            <label style="color:#4a9eff">‚ú® Specific Elements (The "Middle" Block):</label>
            <textarea id="middle_details" rows="2" placeholder="e.g. wet asphalt, fallen leaves, people walking..."></textarea>
        </div>

        <div class="output-area">
            <label>Final Prompt:</label>
            <textarea id="result" readonly></textarea>
            <div class="actions">
                <button onclick="copyToClipboard()" id="copyBtn">COPY & SAVE</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-header">
            <h2>History Log</h2>
            <input type="file" id="importInput" accept=".json" style="display:none" onchange="importBackup(this)">
            <div style="display:flex; gap:5px; flex-wrap:wrap; justify-content: flex-end;">
                <button onclick="document.getElementById('importInput').click()" class="clear-btn" title="Import JSON">üì•</button>
                <button onclick="downloadBackup()" class="clear-btn" title="Save Backup (JSON)">üíæ</button>
                <button onclick="downloadHistory()" class="clear-btn" title="Export Text">üìÑ TXT</button>
                <button onclick="clearHistory()" class="clear-btn" title="Clear All" style="color:#d9534f; border-color:#d9534f;">‚úï</button>
            </div>
        </div>
        <div id="history-list"></div>
    </div>

</div>

<script src="data.js"></script>
<script src="script.js"></script>
</body>
</html>